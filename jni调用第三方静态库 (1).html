<!DOCTYPE html><html><head><title>jni调用第三方静态库</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'></head><body><div id='preview-contents' class='note-content'>
                        <div id="wmd-preview" class="preview-content"></div>
                    <div id="wmd-preview-section-223" class="wmd-preview-section preview-content"></div><div id="wmd-preview-section-243" class="wmd-preview-section preview-content">

<h3 id="jni调用第三方静态库">jni调用第三方静态库</h3>

<p>写错了  这样编译是通过了，可是在实际运用中，却无法访问静态库中的函数的</p>

<p>查看JNi的sample中，模仿写法如下：</p>

</div><div id="wmd-preview-section-313" class="wmd-preview-section preview-content">

<pre class="prettyprint hljs-dark"><code class="hljs elixir"><div><div><div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">CLEAR_VARS)</span>     </div><div><span class="hljs-constant">LOCAL_MODULE </span>   <span class="hljs-symbol">:</span>= libA    </div><div><span class="hljs-constant">LOCAL_SRC_FILES </span><span class="hljs-symbol">:</span>= libA.a       </div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">PREBUILT_STATIC_LIBRARY)</span>  </div><br><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">CLEAR_VARS)</span>     </div><div><span class="hljs-constant">LOCAL_MODULE </span>   <span class="hljs-symbol">:</span>= libB       </div><div><span class="hljs-constant">LOCAL_SRC_FILES </span><span class="hljs-symbol">:</span>= libB.a     </div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">PREBUILT_STATIC_LIBRARY)</span>  </div><br><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">CLEAR_VARS)</span>     </div><div><span class="hljs-constant">LOCAL_MODULE </span>   <span class="hljs-symbol">:</span>= libC  </div><div><span class="hljs-constant">LOCAL_SRC_FILES </span><span class="hljs-symbol">:</span>= libC.a     </div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">PREBUILT_STATIC_LIBRARY)</span>  </div><br><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">CLEAR_VARS)</span>             </div><div><span class="hljs-constant">LOCAL_MODULE </span>   <span class="hljs-symbol">:</span>= <span class="hljs-constant">Test </span> </div><div><span class="hljs-constant">LOCAL_SRC_FILES </span><span class="hljs-symbol">:</span>= <span class="hljs-constant">Test.</span>c        </div><div><span class="hljs-constant">LOCAL_STATIC_LIBRARIES </span><span class="hljs-symbol">:</span>= libA libB libC     </div><div><span class="hljs-constant">LOCAL_LDLIBS </span><span class="hljs-symbol">:</span>= -llog  </div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">BUILD_SHARED_LIBRARY)</span>  </div></div></div></div></code></pre>

<p>动态库 没有验证好像是差不多的</p>

</div><div id="wmd-preview-section-314" class="wmd-preview-section preview-content">

<pre class="prettyprint hljs-dark"><code class="hljs ruby"><div><div><div><div><span class="hljs-constant">LOCAL_PATH</span>    <span class="hljs-symbol">:</span>= <span class="hljs-variable">$(</span>call my-dir)  </div><div><span class="hljs-comment">#  </span></div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">CLEAR_VARS</span>)     </div><div><span class="hljs-constant">LOCAL_MODULE</span>    <span class="hljs-symbol">:</span>= libmmm    </div><div><span class="hljs-constant">LOCAL_SRC_FILES</span> <span class="hljs-symbol">:</span>= libaaa.so     </div><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">PREBUILT_SHARED_LIBRARY</span>)    </div><br><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">CLEAR_VARS</span>)  </div><div><span class="hljs-constant">LOCAL_MODULE</span>    <span class="hljs-symbol">:</span>= libtest  </div><div><span class="hljs-constant">LOCAL_SRC_FILES</span> <span class="hljs-symbol">:</span>= com_lp_jni_JMedia.c  </div><br><div><span class="hljs-constant">LOCAL_LDLIBS</span>    += -<span class="hljs-constant">L</span><span class="hljs-variable">$(</span><span class="hljs-constant">SYSROOT</span>)/usr/lib -llog  </div><br><div><span class="hljs-constant">LOCAL_SHARED_LIBRARIES</span> <span class="hljs-symbol">:</span>= libmmm  </div><br><br><div><span class="hljs-keyword">include</span> <span class="hljs-variable">$(</span><span class="hljs-constant">BUILD_SHARED_LIBRARY</span>)  </div></div></div></div></code></pre></div><div id="wmd-preview-section-footnotes" class="preview-content"></div></div></body></html>